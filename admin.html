<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
</head>
<body>
  <h2>‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>

  <!-- –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ -->
  <button onclick="clearChat()">üßπ –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å —á–∞—Ç</button>

  <div id="messages"></div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script>
    // üîπ –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ–π firebaseConfig (—Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ —á–∞—Ç–µ)
    const firebaseConfig = {
      apiKey: "AIzaSyBqxdrLHc_yaJAkWL3oAyNj65JsQuCaFC4",
      authDomain: "appp-9b246.firebaseapp.com",
      databaseURL: "https://appp-9b246-default-rtdb.firebaseio.com",
      projectId: "appp-9b246",
      storageBucket: "appp-9b246.firebasestorage.app",
      messagingSenderId: "1084543489385",
      appId: "1:1084543489385:web:7d7eb4e552a7b8fafbd9f8"
    };
    firebase.initializeApp(firebaseConfig);

    const db = firebase.database();
    const messagesDiv = document.getElementById("messages");

    // üì° –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
    db.ref("messages").on("child_added", snapshot => {
      const msg = snapshot.val();
      const id = snapshot.key;

      const div = document.createElement("div");
      div.style.border = "1px solid #ccc";
      div.style.margin = "5px";
      div.style.padding = "5px";

      const p = document.createElement("p");
      p.textContent = msg.name + ": " + msg.text;

      // –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–∏—Ç—å
      const btnDelete = document.createElement("button");
      btnDelete.textContent = "‚ùå –£–¥–∞–ª–∏—Ç—å";
      btnDelete.onclick = () => {
        db.ref("messages/" + id).remove();
        div.remove();
      };

      div.appendChild(p);
      div.appendChild(btnDelete);
      messagesDiv.appendChild(div);
    });

    // üßπ –û—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞
    function clearChat() {
      if (confirm("–¢—ã —Ç–æ—á–Ω–æ —Ö–æ—á–µ—à—å —É–¥–∞–ª–∏—Ç—å –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è?")) {
        db.ref("messages").remove();
        messagesDiv.innerHTML = "";
      }
    }
  </script>
</body>
</html>